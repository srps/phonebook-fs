(this["webpackJsonpphonebook-fullstack"]=this["webpackJsonpphonebook-fullstack"]||[]).push([[0],{22:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(17),o=t.n(c),u=(t(22),t(5)),i=t(4),s=t(0),l=function(e){var n=e.person,t=e.handleRemove;return Object(s.jsxs)("li",{children:[n.name," ",n.number," ",Object(s.jsx)("button",{onClick:function(){return t(n)},children:"Delete"})]},n.name)},d=function(e){var n=e.persons,t=e.handleRemove;return Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsx)(l,{person:e,handleRemove:t},e.id)}))})},b=function(e){var n=e.message,t=e.isError,r={color:"green",background:"lightgrey",fontSize:16,borderStyle:"solid",borderRadius:5,padding:8,marginBottom:8},a=Object(u.a)(Object(u.a)({},r),{},{color:"red"});return null===n?null:Object(s.jsx)("div",{style:t?a:r,children:n})},f=t(3),j=t.n(f),h=t(6),m=t(7),p=t.n(m),O="/api/persons",v={getAll:function(){var e=Object(h.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(O);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(h.a)(j.a.mark((function e(n){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(O,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(h.a)(j.a.mark((function e(n,t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat(O,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(h.a)(j.a.mark((function e(n,t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat(O,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},x=function(e){var n=e.filter,t=e.handleFilter;return Object(s.jsxs)("div",{children:["Filter shown with ",Object(s.jsx)("input",{onChange:t,value:n})]})},g=function(e){var n=e.name,t=e.handleName,r=e.number,a=e.handleNumber,c=e.handleSubmit;return Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{onChange:t,value:n})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{onChange:a,value:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},w=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),o=Object(i.a)(c,2),l=o[0],f=o[1],j=Object(r.useState)(""),h=Object(i.a)(j,2),m=h[0],p=h[1],O=Object(r.useState)(""),w=Object(i.a)(O,2),k=w[0],y=w[1],S=Object(r.useState)(null),C=Object(i.a)(S,2),E=C[0],N=C[1],P=Object(r.useState)(null),R=Object(i.a)(P,2),T=R[0],A=R[1];Object(r.useEffect)((function(){v.getAll().then((function(e){a(e)}))}),[]);var D=function(e){v.create(e).then((function(e){a(t.concat(e)),f(""),p(""),N("".concat(e.name," added to the Phonebook")),setTimeout((function(){N(null)}),2e3)})).catch((function(e){A("".concat(l," is already in the Phonebook")),setTimeout((function(){A(null)}),5e3)}))},F=function(e){window.confirm("Update ".concat(e.name,"?"))&&v.update(e.id,e).then((function(e){a(t.map((function(n){return n.id!==e.id?n:e}))),f(""),p("")}))};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(b,{message:T,isError:!0}),Object(s.jsx)(b,{message:E,isError:!1}),Object(s.jsx)(x,{filter:k,handleFilter:function(e){y(e.target.value)}}),Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsx)(g,{name:l,handleName:function(e){f(e.target.value)},number:m,handleNumber:function(e){p(e.target.value)},handleSubmit:function(e){e.preventDefault();var n={name:l,number:m},r=t.find((function(e){return e.name===l}));void 0===r?D(n):F(Object(u.a)(Object(u.a)({},r),{},{number:m}))}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(d,{persons:t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(k.toLowerCase())})),handleRemove:function(e){window.confirm("Delete ".concat(e.name,"?"))&&v.remove(e.id).then((function(n){a(t.filter((function(n){return n.id!==e.id}))),N("".concat(e.name," removed from the Phonebook")),setTimeout((function(){N(null)}),2e3)})).catch((function(n){var r=t.find((function(n){return n.id===e.id}));A(void 0===r?n:"".concat(r.name," has already been removed from the Phonebook")),setTimeout((function(){A(null)}),5e3)}))}})]})};o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.b0b213b7.chunk.js.map