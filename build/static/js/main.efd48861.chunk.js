(this["webpackJsonpphonebook-fullstack"]=this["webpackJsonpphonebook-fullstack"]||[]).push([[0],{22:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(17),o=n.n(c),u=(n(22),n(5)),i=n(4),s=n(0),d=function(e){var t=e.person,n=e.handleRemove;return Object(s.jsxs)("li",{children:[t.name," ",t.number," ",Object(s.jsx)("button",{onClick:function(){return n(t)},children:"Delete"})]},t.name)},l=function(e){var t=e.persons,n=e.handleRemove;return Object(s.jsx)("ul",{children:t.map((function(e){return Object(s.jsx)(d,{person:e,handleRemove:n},e.id)}))})},b=function(e){var t=e.message,n=e.isError,r={color:"green",background:"lightgrey",fontSize:16,borderStyle:"solid",borderRadius:5,padding:8,marginBottom:8},a=Object(u.a)(Object(u.a)({},r),{},{color:"red"});return null===t?null:Object(s.jsx)("div",{style:n?a:r,children:t})},f=n(3),j=n.n(f),h=n(6),m=n(7),p=n.n(m),v="/api/persons",O={getAll:function(){var e=Object(h.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(v);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post(v,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response){e.next=13;break}throw e.t0.response.data;case 13:if(!e.t0.request){e.next=17;break}throw e.t0.request;case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(h.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat(v,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(h.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat(v,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},x=function(e){var t=e.filter,n=e.handleFilter;return Object(s.jsxs)("div",{children:["Filter shown with ",Object(s.jsx)("input",{onChange:n,value:t})]})},w=function(e){var t=e.name,n=e.handleName,r=e.number,a=e.handleNumber,c=e.handleSubmit;return Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{onChange:n,value:t})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{onChange:a,value:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},g=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(i.a)(c,2),d=o[0],f=o[1],j=Object(r.useState)(""),h=Object(i.a)(j,2),m=h[0],p=h[1],v=Object(r.useState)(""),g=Object(i.a)(v,2),k=g[0],S=g[1],y=Object(r.useState)(null),C=Object(i.a)(y,2),E=C[0],N=C[1],R=Object(r.useState)(null),P=Object(i.a)(R,2),T=P[0],A=P[1];Object(r.useEffect)((function(){O.getAll().then((function(e){a(e)}))}),[]);var D=function(e){O.create(e).then((function(e){a(n.concat(e)),f(""),p(""),N("".concat(e.name," added to the Phonebook")),setTimeout((function(){N(null)}),2e3)})).catch((function(t){t.error?A(t.error):A("Unexpected error occured creating ".concat(e.name)),setTimeout((function(){A(null)}),5e3)}))},F=function(e){window.confirm("Update ".concat(e.name,"?"))&&O.update(e.id,e).then((function(e){a(n.map((function(t){return t.id!==e.id?t:e}))),f(""),p("")}))};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(b,{message:T,isError:!0}),Object(s.jsx)(b,{message:E,isError:!1}),Object(s.jsx)(x,{filter:k,handleFilter:function(e){S(e.target.value)}}),Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsx)(w,{name:d,handleName:function(e){f(e.target.value)},number:m,handleNumber:function(e){p(e.target.value)},handleSubmit:function(e){e.preventDefault();var t={name:d,number:m},r=n.find((function(e){return e.name===d}));void 0===r?D(t):F(Object(u.a)(Object(u.a)({},r),{},{number:m}))}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(l,{persons:n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(k.toLowerCase())})),handleRemove:function(e){window.confirm("Delete ".concat(e.name,"?"))&&O.remove(e.id).then((function(t){a(n.filter((function(t){return t.id!==e.id}))),N("".concat(e.name," removed from the Phonebook")),setTimeout((function(){N(null)}),2e3)})).catch((function(t){var r=n.find((function(t){return t.id===e.id}));A(void 0===r?t:"".concat(r.name," has already been removed from the Phonebook")),setTimeout((function(){A(null)}),5e3)}))}})]})};o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(g,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.efd48861.chunk.js.map